---
---

<section id="form">
  <h2>Anmeldelser</h2>
  <h3>Har du allerede besøgt vores butik?</h3>
  <p>Vi ville sætte stor pris på at høre din mening!</p>
  <form>
    <input type="text" id="name" name="name" required placeholder="Hvad er dit navn?" />

    <input type="text" id="location" name="location" required placeholder="Hvor bor du?" />

    <textarea id="text" name="text" required placeholder="Hvad synes du?" rows="10"></textarea>

    <input class="submit" type="submit" value="Send" />
  </form>
</section>

<style>
  #name {
    margin-top: 1rem;
  }
  #form > * {
    margin-bottom: 1rem;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: var(--small);
    max-width: 500px;
  }
  input:not(.submit),
  textarea {
    font-family: Calibre;
    font-size: 16px;
    border: none;
    border-bottom: 1.5px solid var(--orange);
    background-color: transparent;
    padding-left: 0.5rem;
    margin-bottom: 0.5rem;
  }

  textarea {
    border: 1.5px solid var(--orange);
    padding-top: 0.5rem;
    padding-left: 0.5rem;
  }

  .submit {
    background-color: transparent;
    border: 1.5px solid var(--orange);
    padding: 0.7rem 3rem;
    border-radius: 3px;
  }
</style>

<script>
  const url = "https://tpzraxtdvophbbqbosqs.supabase.co/rest/v1/Testimonials";
  const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRwenJheHRkdm9waGJicWJvc3FzIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODE3MTUwMjEsImV4cCI6MTk5NzI5MTAyMX0.ZIeHJV3oZD3T-WIq9ILRtu2neaN1gN0CX6mjL0jDjrI";

  const form = document.querySelector("form");

  form.addEventListener(".submit", sendForm);

  function sendForm(event) {
    event.preventDefault();
    const formData = form.elements;
    let name = formData.name.value;
    let location = formData.location.value;
    let text = formData.text.value;
    console.log(formData.location.value);

    fetch(url, {
      method: "POST",
      headers: {
        apikey: key,
        Accept: "application/json",
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ name, text, location }),
    });
  }
</script>
